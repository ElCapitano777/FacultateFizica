#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#define n 100

///// x
void gen_x(double x[], double a, double b)
{
    int i;
    double h;
    h=(b-a)/(n-1);
    for(i=0;i<=n-1;i++)
    {
        x[i]=(a+i*h);
    }
}
///// f(x)=sin(x)
void gen_f(double x[], double a, double b)
{
    int i;
    double h;
    h=(b-a)/(n-1);
    for(i=0;i<=n-1;i++)
    {
        x[i]=sin(a+i*h);
    }
}

///// f'(x)=cos(x)
void deriv(double x[], double y[], double dy[])
{
    int i;
    for(i=0; i<=n-1;i++)
    {
        dy[i]=((y[i+1]-y[i])/(x[i+1]-x[i]));
    }
}

///// print vector
void print_vect(double a[])
{
    int i;
    for(i=0; i<n; i++)
    {
        printf("%lf  ", a[i]);
    }
    printf("\n");

}
void print_vect2(double a[], double k)
{
    int i;
    for(i=0; i<k; i++)
    {
        printf("%lf  ", a[i]);
    }
    printf("\n");

}

void integrare_dreptunghi(double a,double x[], double y[], double y_integrat[])
{
    for(int j=0; j<a; j++)
    {
        for(int i=0; i<j; i++)
        {
        y_integrat[j] += (x[i+1] - x[i])*y[i];
        }
    }
}

void integrare_trapez(double a,double x[], double y[], double y2_integrat[])
{
    for(int j=0; j<a; j++)
    {
        for(int i=0; i<j; i++)
        {
        y2_integrat[j] += (x[i+1] - x[i])*(y[i+1] + y[i])/2;
        }
    }
}


int main()
{
    double x[n], y[n], dy[n], a, y_integrat[n] = {0}, y2_integrat[n] = {0};
    gen_x(x, 0, 2*M_PI);
    print_vect(x);
    printf("\n\nf(x)\n");
    gen_f(y, 0, 2*M_PI);
    print_vect(y);
    printf("\n\nf'(x)\n");
    deriv(x, y, dy);
    print_vect(dy);
    printf("\n\nPana la al catelea x: ");
    scanf("%lf", &a);
    integrare_dreptunghi(a, x, y, y_integrat);
    integrare_trapez(a, x, y, y2_integrat);
    printf("Vector integrala dreptunghi: \n");
    print_vect2(y_integrat, a);
    printf("Vector integrala trapez: \n");
    print_vect2(y2_integrat, a);
    return 0;
}